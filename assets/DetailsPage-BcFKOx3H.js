import{r as m,H as d,j as e,S as p,L as _,u as f}from"./index-CyZ2JkOp.js";import{A as N}from"./AppBanner-0YU0litv.js";import{u as S,H as $,E as v}from"./ErrorBoundary-DYRgfvH4.js";import{E}from"./ErrorView-Ig0ImZ4c.js";const h=s=>!!s&&typeof s=="object"&&s.hasOwnProperty("price")&&s.hasOwnProperty("pages"),C=({id:s,type:r})=>{const{process:n,setProcess:c,getCharacter:a,getSingleComics:l,clearError:i}=S(),[u,x]=m.useState(null);m.useEffect(()=>{j(s)},[s]);const o=t=>{x(t)},j=t=>{i(),r==="comics"&&l(t).then(o).then(()=>c(d.SUCCESS)),r==="characters"&&a(t).then(o).then(()=>c(d.SUCCESS))},g=(t=>{switch(t){case"idle":return e.jsx(p,{});case"loading":return e.jsx(p,{});case"success":return e.jsx(w,{item:u});case"failure":return e.jsx(E,{flex:"column"});default:throw new Error("Unexpected process state")}})(n);return e.jsx(e.Fragment,{children:g})},w=({item:s})=>{if(!s)return null;const{name:r,imgSrc:n,description:c}=s,a="item-info",l="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg";let i=`${a}__image`;return n===l&&(i+=` ${a}__image_fill`),e.jsxs("div",{className:a,children:[e.jsxs($,{children:[e.jsx("meta",{name:"description",content:`Marvel Wiki Portal - ${r} details`}),e.jsx("title",{children:`Marvel Wiki Portal - ${r}`})]}),e.jsx("div",{className:i,children:e.jsx("img",{src:n,alt:`${r}`})}),e.jsxs("div",{className:`${a}__main`,children:[e.jsx("h3",{className:`${a}__title`,children:r}),e.jsx("article",{className:`${a}__description`,children:c}),h(s)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${a}__pages`,children:s.pages}),e.jsxs("div",{className:`${a}__lang`,children:["Language: ",s.language]}),e.jsx("span",{className:`${a}__price`,children:s.price})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${a}__buttons`,children:[e.jsx("a",{href:s.homepage,className:"app-button app-button_main",children:"Homepage"}),e.jsx("a",{href:s.wiki,className:"app-button",children:"Wiki"})]})})]}),e.jsx("div",{className:`${a}__links`,children:e.jsx(_,{to:h(s)?"/comics":"/characters",className:`${a}__link`,children:"Back to all"})})]})},I=()=>{const{id:s,type:r}=f();return!r||!s||r!=="characters"&&r!=="comics"?null:e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(v,{children:e.jsx(C,{id:parseInt(s),type:r})})]})};export{I as default};
